<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="utf-8" />
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  Â  <title>Gladiators Death Arena: Sudden Death Tournament</title>
Â  Â  Â  Â  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Bebas+Neue&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
Â  Â  <style>
Â  Â  Â  Â  /* --- VISUAL CONFIGURATION --- */
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --primary-glow: #00ffea; /* Cyan neon */
Â  Â  Â  Â  Â  Â  --secondary-glow: #ff00ff; /* Magenta neon */
Â  Â  Â  Â  Â  Â  --bg-dark: #0a0e1f; /* Deep space blue */
Â  Â  Â  Â  Â  Â  --text-light: #f0f0f0; /* Soft white */
Â  Â  Â  Â  Â  Â  --neon-red: #ff4500; /* Rusty neon orange-red (Danger) */
Â  Â  Â  Â  Â  Â  --neon-green: #00ff85; /* Bright green (Healing/Success) */
Â  Â  Â  Â  Â  Â  --grid-color-dark: #1a2333; /* Darker grid */
Â  Â  Â  Â  Â  Â  --card-bg: rgba(10, 14, 31, 0.95);
Â  Â  Â  Â  Â  Â  --border-radius: 12px;
Â  Â  Â  Â  Â  Â  --spacing-sm: 12px;
Â  Â  Â  Â  Â  Â  --spacing-md: 24px;
Â  Â  Â  Â  Â  Â  --spacing-lg: 32px;
Â  Â  Â  Â  Â  Â  --attack-color: #ff00ff; /* Magenta */
Â  Â  Â  Â  Â  Â  --defense-color: #00ffea; /* Cyan */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- KEYFRAME ANIMATIONS --- */
Â  Â  Â  Â  @keyframes scanlines { 0% { background-position: 0 0; } 100% { background-position: 0 50em; } }
Â  Â  Â  Â  @keyframes flicker {
Â  Â  Â  Â  Â  Â  0%, 18%, 22%, 25%, 53%, 57%, 100% { text-shadow: 0 0 15px var(--primary-glow), 0 0 20px var(--primary-glow); }
Â  Â  Â  Â  Â  Â  20%, 24%, 55% { text-shadow: none; }
Â  Â  Â  Â  Â  Â  58% { text-shadow: 0.5px 0 1px var(--secondary-glow), -0.5px 0 1px var(--neon-red); }
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes pulse-glow {
Â  Â  Â  Â  Â  Â  0% { box-shadow: 0 0 10px var(--primary-glow); }
Â  Â  Â  Â  Â  Â  50% { box-shadow: 0 0 20px var(--secondary-glow); }
Â  Â  Â  Â  Â  Â  100% { box-shadow: 0 0 10px var(--primary-glow); }
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes damage-shake {
Â  Â  Â  Â  Â  Â  0%, 100% { transform: translate(0); }
Â  Â  Â  Â  Â  Â  25% { transform: translate(-5px, 0); }
Â  Â  Â  Â  Â  Â  75% { transform: translate(5px, 0); }
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes score-grow {
Â  Â  Â  Â  Â  Â  from { transform: scale(0); opacity: 0; }
Â  Â  Â  Â  Â  Â  to { transform: scale(1.1); opacity: 1; }
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes neon-firework {
Â  Â  Â  Â  Â  Â  0% { opacity: 0; transform: scale(0.5); }
Â  Â  Â  Â  Â  Â  50% { opacity: 1; transform: scale(1.1); text-shadow: 0 0 30px var(--neon-green), 0 0 50px var(--neon-green); }
Â  Â  Â  Â  Â  Â  100% { opacity: 1; transform: scale(1); }
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes vanish {
Â  Â  Â  Â  Â  Â  0% { transform: scale(1); opacity: 1; }
Â  Â  Â  Â  Â  Â  100% { transform: scale(0.5); opacity: 0; }
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes critical-hit {
Â  Â  Â  Â  Â  Â  0% { box-shadow: 0 0 15px var(--neon-red), 0 0 30px var(--neon-red); }
Â  Â  Â  Â  Â  Â  50% { box-shadow: 0 0 30px var(--neon-red), 0 0 50px var(--neon-red); }
Â  Â  Â  Â  Â  Â  100% { box-shadow: 0 0 15px var(--neon-red), 0 0 30px var(--neon-red); }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 

Â  Â  Â  Â  /* --- CORE LAYOUT --- */
Â  Â  Â  Â  html, body {
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  background: radial-gradient(circle at center, #0c1426, var(--bg-dark));
Â  Â  Â  Â  Â  Â  color: var(--text-light);
Â  Â  Â  Â  Â  Â  font-family: 'Roboto Mono', monospace;
Â  Â  Â  Â  Â  Â  overflow-x: hidden;
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  }

Â  Â  Â  Â  body::before {
Â  Â  Â  Â  Â  Â  content: '';
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 0; left: 0; width: 100%; height: 100%;
Â  Â  Â  Â  Â  Â  pointer-events: none; z-index: 9999; opacity: 0.08;
Â  Â  Â  Â  Â  Â  background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.5) 50%), repeating-linear-gradient(transparent, transparent 1px, rgba(0, 0, 0, 0.15) 1px, rgba(0, 0, 0, 0.15) 2px);
Â  Â  Â  Â  Â  Â  background-size: 100% 2px, 2px 2px;
Â  Â  Â  Â  Â  Â  animation: scanlines 6s linear infinite;
Â  Â  Â  Â  }

Â  Â  Â  Â  #mainContainer {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  padding: clamp(var(--spacing-sm), 4vw, var(--spacing-md));
Â  Â  Â  Â  Â  Â  max-width: 1600px;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- TITLE --- */
Â  Â  Â  Â  #titleContainer {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  margin-bottom: var(--spacing-md);
Â  Â  Â  Â  }
Â  Â  Â  Â  h1 {
Â  Â  Â  Â  Â  Â  font-family: 'Orbitron', sans-serif;
Â  Â  Â  Â  Â  Â  color: var(--primary-glow);
Â  Â  Â  Â  Â  Â  animation: flicker 4s linear infinite;
Â  Â  Â  Â  Â  Â  letter-spacing: 4px;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  font-size: clamp(1.8em, 4vw, 3em);
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  outline: 2px solid var(--primary-glow);
Â  Â  Â  Â  Â  Â  padding: 8px 24px;
Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius);
Â  Â  Â  Â  Â  Â  background: var(--card-bg);
Â  Â  Â  Â  Â  Â  z-index: 100;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- SETUP PAGE --- */
Â  Â  Â  Â  #setupScreen {
Â  Â  Â  Â  Â  Â  max-width: 900px; /* Wider for list display */
Â  Â  Â  Â  Â  Â  width: 90%;
Â  Â  Â  Â  Â  Â  margin: var(--spacing-lg) auto;
Â  Â  Â  Â  Â  Â  padding: var(--spacing-lg);
Â  Â  Â  Â  Â  Â  background: var(--card-bg);
Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius);
Â  Â  Â  Â  Â  Â  border: 2px solid var(--primary-glow);
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 20px var(--primary-glow);
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  animation: pulse-glow 8s ease-in-out infinite;
Â  Â  Â  Â  }
Â  Â  Â  Â  #setupScreen h2 {
Â  Â  Â  Â  Â  Â  font-family: 'Orbitron', sans-serif;
Â  Â  Â  Â  Â  Â  color: var(--secondary-glow);
Â  Â  Â  Â  Â  Â  text-shadow: 0 0 12px var(--secondary-glow);
Â  Â  Â  Â  Â  Â  margin: 0 0 var(--spacing-md);
Â  Â  Â  Â  Â  Â  font-size: clamp(1.4em, 3vw, 2.2em);
Â  Â  Â  Â  }
Â  Â  Â  Â  .input-card {
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.6);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--primary-glow);
Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius);
Â  Â  Â  Â  Â  Â  padding: var(--spacing-md);
Â  Â  Â  Â  Â  Â  box-shadow: inset 0 0 8px rgba(0, 255, 234, 0.2);
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  Â  Â  margin-bottom: var(--spacing-md);
Â  Â  Â  Â  }
Â  Â  Â  Â  .input-card label {
Â  Â  Â  Â  Â  Â  color: var(--text-light);
Â  Â  Â  Â  Â  Â  font-size: 1.1em;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  margin-bottom: var(--spacing-sm);
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  }
Â  Â  Â  Â  .input-card textarea {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  min-height: 100px;
Â  Â  Â  Â  Â  Â  background: var(--bg-dark);
Â  Â  Â  Â  Â  Â  color: var(--text-light);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--primary-glow);
Â  Â  Â  Â  Â  Â  padding: var(--spacing-sm);
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  font-family: 'Roboto Mono', monospace;
Â  Â  Â  Â  Â  Â  font-size: 1em;
Â  Â  Â  Â  Â  Â  resize: vertical;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  }
Â  Â  Â  Â  .mode-selector {
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.6);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--secondary-glow);
Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius);
Â  Â  Â  Â  Â  Â  padding: var(--spacing-sm);
Â  Â  Â  Â  Â  Â  margin-bottom: var(--spacing-md);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 20px;
Â  Â  Â  Â  Â  Â  font-family: 'Orbitron', sans-serif;
Â  Â  Â  Â  }
Â  Â  Â  Â  .mode-selector label {
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  padding: 8px 15px;
Â  Â  Â  Â  Â  Â  border-radius: 6px;
Â  Â  Â  Â  Â  Â  transition: background-color 0.2s;
Â  Â  Â  Â  Â  Â  border: 1px solid transparent;
Â  Â  Â  Â  }
Â  Â  Â  Â  .mode-selector input[type="radio"] {
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  .mode-selector input[type="radio"]:checked + label {
Â  Â  Â  Â  Â  Â  background-color: var(--primary-glow);
Â  Â  Â  Â  Â  Â  color: var(--bg-dark);
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  text-shadow: none;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 8px var(--primary-glow);
Â  Â  Â  Â  }


Â  Â  Â  Â  /* --- GAME BUTTONS --- */
Â  Â  Â  Â  .game-button {
Â  Â  Â  Â  Â  Â  padding: 12px 28px;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius);
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  font-family: 'Orbitron', sans-serif;
Â  Â  Â  Â  Â  Â  font-size: 1em;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  background: linear-gradient(45deg, var(--primary-glow), var(--secondary-glow));
Â  Â  Â  Â  Â  Â  color: var(--bg-dark);
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 12px rgba(0, 255, 234, 0.3);
Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  Â  Â  Â  min-width: 180px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .game-button:hover {
Â  Â  Â  Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 20px var(--primary-glow);
Â  Â  Â  Â  Â  Â  filter: brightness(1.2);
Â  Â  Â  Â  }
Â  Â  Â  Â  .game-button.secondary {
Â  Â  Â  Â  Â  Â  background: linear-gradient(45deg, var(--neon-red), #ff9900);
Â  Â  Â  Â  Â  Â  color: var(--text-light);
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 12px var(--neon-red);
Â  Â  Â  Â  }
Â  Â  Â  Â  .game-button.manual-advance {
Â  Â  Â  Â  Â  Â  background: linear-gradient(45deg, var(--neon-green), #00aaff);
Â  Â  Â  Â  Â  Â  color: var(--bg-dark);
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 12px var(--neon-green);
Â  Â  Â  Â  }
Â  Â  Â  Â  .game-button:disabled {
Â  Â  Â  Â  Â  Â  opacity: 0.5;
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  Â  Â  transform: none;
Â  Â  Â  Â  Â  Â  box-shadow: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- GAME SCREEN --- */
Â  Â  Â  Â  #gameScreen {
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  flex-grow: 1;
Â  Â  Â  Â  Â  Â  padding-top: var(--spacing-md);
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Top Status Bar - Now fixed below the title in the game screen */
Â  Â  Â  Â  #statusConsole {
Â  Â  Â  Â  Â  Â  background: var(--bg-dark);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--secondary-glow);
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  font-size: 1em;
Â  Â  Â  Â  Â  Â  color: var(--primary-glow);
Â  Â  Â  Â  Â  Â  font-family: 'Orbitron', sans-serif;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 10px var(--secondary-glow);
Â  Â  Â  Â  Â  Â  margin-bottom: var(--spacing-md);
Â  Â  Â  Â  Â  Â  min-height: 40px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Status Bar in Setup Screen */
Â  Â  Â  Â  #setupStatus {
Â  Â  Â  Â  Â  Â  color: var(--primary-glow);Â 
Â  Â  Â  Â  Â  Â  margin-bottom: var(--spacing-md);
Â  Â  Â  Â  }

Â  Â  Â  Â  #arena {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center; /* Center the single duel zone */
Â  Â  Â  Â  Â  Â  gap: var(--spacing-md);
Â  Â  Â  Â  Â  Â  flex-grow: 1;
Â  Â  Â  Â  Â  Â  margin-bottom: var(--spacing-md);
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* --- DUEL ZONE --- */
Â  Â  Â  Â  #duelZone {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  min-width: 300px;
Â  Â  Â  Â  Â  Â  padding: var(--spacing-md);
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.5);
Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius);
Â  Â  Â  Â  Â  Â  border: 3px solid var(--secondary-glow);
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 30px var(--secondary-glow);
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  max-width: 800px; /* Constraint duel zone size on large screens */
Â  Â  Â  Â  Â  Â  width: 90%;
Â  Â  Â  Â  Â  Â  margin-bottom: var(--spacing-md);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  #roundDisplay {
Â  Â  Â  Â  Â  Â  font-family: 'Bebas Neue', sans-serif;
Â  Â  Â  Â  Â  Â  font-size: 3em;
Â  Â  Â  Â  Â  Â  color: var(--primary-glow);
Â  Â  Â  Â  Â  Â  text-shadow: 0 0 15px var(--primary-glow);
Â  Â  Â  Â  Â  Â  margin: var(--spacing-sm) 0;
Â  Â  Â  Â  Â  Â  line-height: 1;
Â  Â  Â  Â  }
Â  Â  Â  Â  #actionSlots {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: var(--spacing-lg);
Â  Â  Â  Â  Â  Â  margin: var(--spacing-md) 0;
Â  Â  Â  Â  Â  Â  z-index: 10;
Â  Â  Â  Â  }
Â  Â  Â  Â  .action-slot {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  width: 200px;Â 
Â  Â  Â  Â  Â  Â  height: 250px;
Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius);
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.4);
Â  Â  Â  Â  Â  Â  box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.1);
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  border: 2px dashed #444;
Â  Â  Â  Â  }
Â  Â  Â  Â  .action-slot.winner {
Â  Â  Â  Â  Â  Â  border-color: var(--neon-green);
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 25px var(--neon-green);
Â  Â  Â  Â  }
Â  Â  Â  Â  .action-slot.loser {
Â  Â  Â  Â  Â  Â  border-color: var(--neon-red);
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 15px var(--neon-red);
Â  Â  Â  Â  Â  Â  opacity: 0.5;
Â  Â  Â  Â  }
Â  Â  Â  Â  .action-slot.loser-vanish {
Â  Â  Â  Â  Â  Â  animation: vanish 0.8s ease-out forwards;
Â  Â  Â  Â  Â  Â  pointer-events: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  .action-slot.clash-flash {
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 40px var(--primary-glow), 0 0 60px var(--secondary-glow);
Â  Â  Â  Â  }
Â  Â  Â  Â  .slot-card-image {
Â  Â  Â  Â  Â  Â  width: 120px;
Â  Â  Â  Â  Â  Â  height: 120px;
Â  Â  Â  Â  Â  Â  image-rendering: pixelated;
Â  Â  Â  Â  }
Â  Â  Â  Â  .slot-card-info {
Â  Â  Â  Â  Â  Â  font-size: 0.8em;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  text-shadow: 0 0 5px #000;
Â  Â  Â  Â  }
Â  Â  Â  Â  .luck-score {
Â  Â  Â  Â  Â  Â  font-family: 'Bebas Neue', sans-serif;
Â  Â  Â  Â  Â  Â  font-size: 2.5em;
Â  Â  Â  Â  Â  Â  color: var(--secondary-glow);
Â  Â  Â  Â  Â  Â  text-shadow: 0 0 10px var(--secondary-glow);
Â  Â  Â  Â  Â  Â  margin-top: 5px;
Â  Â  Â  Â  Â  Â  line-height: 1;
Â  Â  Â  Â  Â  Â  animation: score-grow 0.5s ease-out;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Match Detail Console */
Â  Â  Â  Â  #matchDetails {
Â  Â  Â  Â  Â  Â  margin-top: var(--spacing-md);
Â  Â  Â  Â  Â  Â  padding: var(--spacing-sm);
Â  Â  Â  Â  Â  Â  background: var(--bg-dark);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--primary-glow);
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  width: 90%;
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  Â  Â  font-size: 0.9em;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 10px var(--primary-glow);
Â  Â  Â  Â  Â  Â  font-family: 'Roboto Mono', monospace;
Â  Â  Â  Â  }
Â  Â  Â  Â  .score-line {
Â  Â  Â  Â  Â  Â  padding: 3px 0;
Â  Â  Â  Â  Â  Â  border-bottom: 1px dotted rgba(255, 255, 255, 0.1);
Â  Â  Â  Â  }
Â  Â  Â  Â  .score-line:last-child { border-bottom: none; }
Â  Â  Â  Â  .score-p1 { color: var(--primary-glow); }
Â  Â  Â  Â  .score-p2 { color: var(--secondary-glow); }
Â  Â  Â  Â  .type-adj-text { color: var(--neon-green); font-weight: bold; }
Â  Â  Â  Â  .type-disadj-text { color: var(--neon-red); font-weight: bold; }


Â  Â  Â  Â  /* --- TOURNAMENT LIST & POKEMON CARDS (Same on Setup & Game screens) --- */
Â  Â  Â  Â  #tournamentListContainer {
Â  Â  Â  Â  Â  Â  margin-top: var(--spacing-md);
Â  Â  Â  Â  Â  Â  max-height: 200px;
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  Â  Â  border: 1px solid var(--primary-glow);
Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius);
Â  Â  Â  Â  Â  Â  padding: var(--spacing-sm);
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.5);
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  }
Â  Â  Â  Â  #tournamentListContainer h4 {
Â  Â  Â  Â  Â  Â  font-family: 'Orbitron', sans-serif;
Â  Â  Â  Â  Â  Â  color: var(--secondary-glow);
Â  Â  Â  Â  Â  Â  margin: 0 0 10px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  #contenderList {
Â  Â  Â  Â  Â  Â  list-style: none;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  Â  Â  Â  gap: 15px;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  .contender-card-item {
Â  Â  Â  Â  Â  Â  width: 120px;
Â  Â  Â  Â  Â  Â  padding: 5px;
Â  Â  Â  Â  Â  Â  background: var(--card-bg);
Â  Â  Â  Â  Â  Â  border: 2px solid var(--secondary-glow);
Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius);
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 8px var(--secondary-glow);
Â  Â  Â  Â  Â  Â  transition: all 0.3s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .contender-card-item.contender-eliminated {
Â  Â  Â  Â  Â  Â  border-color: var(--neon-red);
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 5px var(--neon-red);
Â  Â  Â  Â  Â  Â  opacity: 0.4;
Â  Â  Â  Â  Â  Â  text-decoration: line-through;
Â  Â  Â  Â  }
Â  Â  Â  Â  .contender-card-item h5 {
Â  Â  Â  Â  Â  Â  margin: 0 0 5px;
Â  Â  Â  Â  Â  Â  font-size: 1em;
Â  Â  Â  Â  Â  Â  color: var(--neon-green);
Â  Â  Â  Â  Â  Â  font-family: 'Bebas Neue', sans-serif;
Â  Â  Â  Â  }
Â  Â  Â  Â  .contender-card-item img {
Â  Â  Â  Â  Â  Â  width: 60px;
Â  Â  Â  Â  Â  Â  height: 60px;
Â  Â  Â  Â  Â  Â  image-rendering: pixelated;
Â  Â  Â  Â  }
Â  Â  Â  Â  .contender-card-item .type-badge {
Â  Â  Â  Â  Â  Â  font-family: 'Orbitron', sans-serif;
Â  Â  Â  Â  Â  Â  font-size: 0.6em;
Â  Â  Â  Â  Â  Â  padding: 2px 4px;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  margin-top: 5px;
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  }
Â  Â  Â  Â  .type-badge.Fire { background-color: #ff4500; color: white; }
Â  Â  Â  Â  .type-badge.Water { background-color: #00aaff; color: white; }
Â  Â  Â  Â  .type-badge.Grass { background-color: #00ff85; color: black; }
Â  Â  Â  Â  .type-badge.Electric { background-color: #fffb00; color: black; }
Â  Â  Â  Â  .type-badge.Ground { background-color: #964b00; color: white; }
Â  Â  Â  Â  .type-badge.Psychic { background-color: #ff00ff; color: white; }
Â  Â  Â  Â  .type-badge.Normal { background-color: #aaaaaa; color: black; }
Â  Â  Â  Â  .type-badge.Flying { background-color: #b0e0e6; color: black; }


Â  Â  Â  Â  /* --- WINNER OVERLAY --- */
Â  Â  Â  Â  #winnerOverlay {
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 0; left: 0; width: 100%; height: 100%;
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.95);
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  color: var(--primary-glow);
Â  Â  Â  Â  Â  Â  font-family: 'Orbitron', sans-serif;
Â  Â  Â  Â  Â  Â  text-shadow: 0 0 10px var(--primary-glow);
Â  Â  Â  Â  Â  Â  z-index: 2000;
Â  Â  Â  Â  Â  Â  animation: pulse-glow 2s ease-in-out infinite;
Â  Â  Â  Â  }
Â  Â  Â  Â  #winnerOverlay h2 {
Â  Â  Â  Â  Â  Â  font-size: clamp(3em, 8vw, 5em);
Â  Â  Â  Â  Â  Â  color: var(--secondary-glow);
Â  Â  Â  Â  Â  Â  text-shadow: 0 0 15px var(--secondary-glow), 0 0 25px var(--secondary-glow);
Â  Â  Â  Â  Â  Â  margin: 0 0 10px;
Â  Â  Â  Â  Â  Â  animation: neon-firework 2s ease-out both;
Â  Â  Â  Â  }
Â  Â  Â  Â  #winnerName {
Â  Â  Â  Â  Â  Â  font-size: clamp(4em, 10vw, 7em);
Â  Â  Â  Â  Â  Â  color: var(--neon-green);
Â  Â  Â  Â  Â  Â  text-shadow: 0 0 20px var(--neon-green), 0 0 40px var(--neon-green), 0 0 60px var(--neon-green);
Â  Â  Â  Â  Â  Â  font-family: 'Bebas Neue', sans-serif;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  letter-spacing: 6px;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  animation: neon-firework 2s ease-out 0.5s both;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- RESPONSIVE ADJUSTMENTS --- */
Â  Â  Â  Â  @media (max-width: 1024px) {
Â  Â  Â  Â  Â  Â  #arena {
Â  Â  Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .action-slot {
Â  Â  Â  Â  Â  Â  Â  Â  width: 150px;
Â  Â  Â  Â  Â  Â  Â  Â  height: 200px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .slot-card-image {
Â  Â  Â  Â  Â  Â  Â  Â  width: 90px;
Â  Â  Â  Â  Â  Â  Â  Â  height: 90px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  @media (max-width: 640px) {
Â  Â  Â  Â  Â  Â  .action-slot {
Â  Â  Â  Â  Â  Â  Â  Â  width: 120px;
Â  Â  Â  Â  Â  Â  Â  Â  height: 180px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .slot-card-image {
Â  Â  Â  Â  Â  Â  Â  Â  width: 70px;
Â  Â  Â  Â  Â  Â  Â  Â  height: 70px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .contender-card-item {
Â  Â  Â  Â  Â  Â  Â  Â  width: 100px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  #actionSlots {
Â  Â  Â  Â  Â  Â  Â  Â  gap: var(--spacing-sm);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  Â  Â  <audio id="explosionSound" src="arena_explosion.mp3"></audio>

Â  Â  <div id="mainContainer">
Â  Â  Â  Â  <div id="titleContainer">
Â  Â  Â  Â  Â  Â  <h1>GLADIATORS DEATH ARENA: SUDDEN DEATH TOURNAMENT</h1>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="setupScreen">
Â  Â  Â  Â  Â  Â  <h2>TOURNAMENT REGISTRATION & POKÃ‰MON ASSIGNMENT</h2>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mode-selector">
Â  Â  Â  Â  Â  Â  Â  Â  <p>TOURNAMENT MODE:</p>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="radio" id="modeAuto" name="gameMode" value="auto" checked>
Â  Â  Â  Â  Â  Â  Â  Â  <label for="modeAuto">AUTOMATIC</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="radio" id="modeManual" name="gameMode" value="manual">
Â  Â  Â  Â  Â  Â  Â  Â  <label for="modeManual">MANUAL</label>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="input-card">
Â  Â  Â  Â  Â  Â  Â  Â  <label for="contenderNames">Enter Contender Names (one per line, min 2):</label>
Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="contenderNames" rows="5" placeholder=""></textarea>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div id="tournamentListContainer" style="display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  <h4>TOURNAMENT BRACKET</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <ul id="contenderList"></ul>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div id="setupStatus" style="color: var(--primary-glow); margin-bottom: var(--spacing-md);">Enter contenders and press SHUFFLE POKÃ‰MONS.</div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div style="display: flex; gap: var(--spacing-md); justify-content: center;">
Â  Â  Â  Â  Â  Â  Â  Â  <button id="shufflePokemonsButton" class="game-button secondary">SHUFFLE POKÃ‰MONS</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="selectPlayersButton" class="game-button">BEGIN TOURNAMENT</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <button onclick="resetGame()" class="game-button secondary" style="margin-top: var(--spacing-md);">RESET ARENA</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="gameScreen">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="statusConsole"></div>

Â  Â  Â  Â  Â  Â  <div id="arena">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="duelZone">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="roundDisplay">MATCH 1 / ROUND 1</div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="actionSlots">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="p1DuelSlot" class="action-slot">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>CONTENDER 1</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img class="slot-card-image" src="" alt="P1 Pokemon" style="display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="slot-card-info"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="luck-score" id="p1LuckScore">---</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 style="font-family: 'Orbitron', sans-serif; color: var(--neon-red); text-shadow: 0 0 10px var(--neon-red); margin: 0;">VS</h2>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="p2DuelSlot" class="action-slot">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>CONTENDER 2</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img class="slot-card-image" src="" alt="P2 Pokemon" style="display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="slot-card-info"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="luck-score" id="p2LuckScore">---</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="matchDetails">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Waiting for match resolution...
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 id="eliminationMessage" style="color: var(--neon-red); display: none;"></h2>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="nextMatchButton" class="game-button manual-advance" style="display: none;">NEXT BATTLE</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="winnerOverlay">
Â  Â  Â  Â  Â  Â  <h2>TOURNAMENT CHAMPION EMERGES!</h2>
Â  Â  Â  Â  Â  Â  <span id="winnerName"></span>
Â  Â  Â  Â  Â  Â  <button onclick="resetGame()" class="game-button" style="margin-top: var(--spacing-lg);">START NEW TOURNAMENT</button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  const setupScreen = document.getElementById('setupScreen');
Â  Â  Â  Â  const gameScreen = document.getElementById('gameScreen');
Â  Â  Â  Â  const winnerOverlay = document.getElementById('winnerOverlay');
Â  Â  Â  Â  const statusConsole = document.getElementById('statusConsole'); // Now the top bar in game view
Â  Â  Â  Â  const setupStatus = document.getElementById('setupStatus'); // Status bar in setup view
Â  Â  Â  Â  const shufflePokemonsButton = document.getElementById('shufflePokemonsButton');
Â  Â  Â  Â  const selectPlayersButton = document.getElementById('selectPlayersButton');
Â  Â  Â  Â  const roundDisplay = document.getElementById('roundDisplay');
Â  Â  Â  Â  const explosionSound = document.getElementById('explosionSound');
Â  Â  Â  Â  const contenderListUl = document.getElementById('contenderList');
Â  Â  Â  Â  const tournamentListContainer = document.getElementById('tournamentListContainer');
Â  Â  Â  Â  const eliminationMessage = document.getElementById('eliminationMessage');
Â  Â  Â  Â  const matchDetails = document.getElementById('matchDetails');
Â  Â  Â  Â  const nextMatchButton = document.getElementById('nextMatchButton'); // Manual control button

Â  Â  Â  Â  // Duel Slot Elements
Â  Â  Â  Â  const p1DuelSlot = document.getElementById('p1DuelSlot');
Â  Â  Â  Â  const p2DuelSlot = document.getElementById('p2DuelSlot');Â 
Â  Â  Â  Â  const p1LuckScoreDisplay = document.getElementById('p1LuckScore');
Â  Â  Â  Â  const p2LuckScoreDisplay = document.getElementById('p2LuckScore');

Â  Â  Â  Â  // --- GLOBAL GAME STATE ---
Â  Â  Â  Â  const MATCH_SETUP_DELAY_MS = 1500; // Time to view pairing before resolution starts
Â  Â  Â  Â  const MATCH_SCORE_DISPLAY_MS = 1000; // Time the final scores are visible before elimination
Â  Â  Â  Â  const MATCH_ELIMINATION_MS = 2000; // Time for explosion/vanish effect
        // ðŸŒŸ FIX: Added the missing constant
        const MATCH_RESOLUTION_DELAY_MS = 2500; // Time for round announcement pause
        // ðŸŒŸ END FIX

Â  Â  Â  Â  let gameActive = false;
Â  Â  Â  Â  let tournamentRound = 0;
Â  Â  Â  Â  let matchNumber = 0;
Â  Â  Â  Â  let gameMode = 'auto'; // 'auto' or 'manual'

Â  Â  Â  Â  // Tournament specific state
Â  Â  Â  Â  let allContenders = [];Â 
Â  Â  Â  Â  let activeContendersQueue = [];Â 
Â  Â  Â  Â  let currentMatch = null;Â 

Â  Â  Â  Â  // --- POKEMON DATA & RULES ---
Â  Â  Â  Â  const POKEMON_TYPES = ['Fire', 'Water', 'Grass', 'Electric', 'Ground', 'Psychic', 'Normal', 'Flying'];
Â  Â  Â  Â  const ALL_POKEMON_COUNT = 151;
Â  Â  Â  Â  let POKEMON_SPRITE_DATA = [];Â 

Â  Â  Â  Â  // Simplified Type Chart
Â  Â  Â  Â  const TYPE_CHART = {
Â  Â  Â  Â  Â  Â  'Fire': { SE: ['Grass'], NE: ['Fire', 'Water', 'Ground'] },
Â  Â  Â  Â  Â  Â  'Water': { SE: ['Fire', 'Ground'], NE: ['Water', 'Grass'] },
Â  Â  Â  Â  Â  Â  'Grass': { SE: ['Water', 'Ground'], NE: ['Fire', 'Grass', 'Flying'] },
Â  Â  Â  Â  Â  Â  'Electric': { SE: ['Water', 'Flying'], NE: ['Electric', 'Grass', 'Ground'] },
Â  Â  Â  Â  Â  Â  'Ground': { SE: ['Electric', 'Fire'], NE: ['Grass', 'Flying'] },
Â  Â  Â  Â  Â  Â  'Psychic': { SE: ['Fighting', 'Poison'], NE: ['Psychic'] },
Â  Â  Â  Â  Â  Â  'Normal': { SE: [], NE: ['Ground'] },
Â  Â  Â  Â  Â  Â  'Flying': { SE: ['Grass', 'Fighting'], NE: ['Electric', 'Flying'] }
Â  Â  Â  Â  };
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Returns point adjustments based on match-up
Â  Â  Â  Â  function getTypeAdjustment(attackingType, defendingType) {
Â  Â  Â  Â  Â  Â  const chart = TYPE_CHART[attackingType];
Â  Â  Â  Â  Â  Â  if (!chart) return 0; // Neutral

Â  Â  Â  Â  Â  Â  if (chart.SE.includes(defendingType)) {
Â  Â  Â  Â  Â  Â  Â  Â  return 50; // Super Effective: Major Advantage
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (chart.NE.includes(defendingType)) {
Â  Â  Â  Â  Â  Â  Â  Â  return -30; // Not Effective: Major Disadvantage
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  return 0; // Neutral
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- SETUP & UTILITY FUNCTIONS ---

Â  Â  Â  Â  function initializePokemonData() {
Â  Â  Â  Â  Â  Â  POKEMON_SPRITE_DATA = [];
Â  Â  Â  Â  Â  Â  let powers = [];
Â  Â  Â  Â  Â  Â  let types = [];
Â  Â  Â  Â  Â  Â  for(let i = 0; i < ALL_POKEMON_COUNT; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  powers.push(Math.floor(Math.random() * 50) + 50); // Power 50-100
Â  Â  Â  Â  Â  Â  Â  Â  types.push(POKEMON_TYPES[i % POKEMON_TYPES.length]);Â 
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  powers = shuffleArray(powers);
Â  Â  Â  Â  Â  Â  types = shuffleArray(types);

Â  Â  Â  Â  Â  Â  for (let id = 1; id <= ALL_POKEMON_COUNT; id++) {
Â  Â  Â  Â  Â  Â  Â  Â  POKEMON_SPRITE_DATA.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id: id,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: `Poke ${id}`,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: types[id - 1],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  power: powers[id - 1],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  spriteUrl: `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/${id}.gif`,
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  POKEMON_SPRITE_DATA = shuffleArray(POKEMON_SPRITE_DATA);
Â  Â  Â  Â  Â  Â  updateStatus('PokÃ©mon attributes initialized. Enter contenders.');
Â  Â  Â  Â  }

Â  Â  Â  Â  function shufflePokemons() {
Â  Â  Â  Â  Â  Â  if (gameActive) return;
Â  Â  Â  Â  Â  Â  initializePokemonData();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (allContenders.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  const shuffledPokemonData = shuffleArray([...POKEMON_SPRITE_DATA]);
Â  Â  Â  Â  Â  Â  Â  Â  allContenders.forEach((contender, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  contender.pokemon = shuffledPokemonData[index % shuffledPokemonData.length];
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  updateContenderList();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  updateStatus('PokÃ©mon Types and Powers have been SHUFFLED. Ready to start tournament.');
Â  Â  Â  Â  }

Â  Â  Â  Â  function shuffleArray(array) {
Â  Â  Â  Â  Â  Â  for (let i = array.length - 1; i > 0; i--) {
Â  Â  Â  Â  Â  Â  Â  Â  const j = Math.floor(Math.random() * (i + 1));
Â  Â  Â  Â  Â  Â  Â  Â  [array[i], array[j]] = [array[j], array[i]];
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  return array;
Â  Â  Â  Â  }

Â  Â  Â  Â  function playExplosion() {
Â  Â  Â  Â  Â  Â  document.body.style.animation = 'damage-shake 0.2s 3';
Â  Â  Â  Â  Â  Â  setTimeout(() => document.body.style.animation = 'none', 600);
Â  Â  Â  Â  Â  Â  explosionSound.currentTime = 0;
Â  Â  Â  Â  Â  Â  explosionSound.play().catch(e => { /* Audio playback likely blocked by browser, ignoring error */ });
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateStatus(message, isError = false) {
Â  Â  Â  Â  Â  Â  const element = gameScreen.style.display === 'flex' ? statusConsole : setupStatus;
Â  Â  Â  Â  Â  Â  element.innerHTML = message;
Â  Â  Â  Â  Â  Â  element.style.borderColor = isError ? 'var(--neon-red)' : 'var(--secondary-glow)';
Â  Â  Â  Â  Â  Â  element.style.boxShadow = isError ? '0 0 10px var(--neon-red)' : '0 0 10px var(--secondary-glow)';
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- DISPLAY FUNCTIONS ---

Â  Â  Â  Â  function updateDuelSlot(element, contender) {
Â  Â  Â  Â  Â  Â  const img = element.querySelector('.slot-card-image');
Â  Â  Â  Â  Â  Â  img.src = contender.pokemon.spriteUrl;
Â  Â  Â  Â  Â  Â  img.alt = contender.pokemon.name;
Â  Â  Â  Â  Â  Â  img.style.display = 'block';

Â  Â  Â  Â  Â  Â  element.querySelector('h4').textContent = contender.name;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const info = element.querySelector('.slot-card-info');
Â  Â  Â  Â  Â  Â  info.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-type ${contender.pokemon.type}" style="font-size: 1.2em; font-family: 'Bebas Neue', sans-serif;">${contender.pokemon.name}</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="type-badge ${contender.pokemon.type}">TYPE: ${contender.pokemon.type}</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size: 0.7em;">PWR: ${contender.pokemon.power}</div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  element.classList.remove('winner', 'loser', 'loser-vanish', 'clash-flash');
Â  Â  Â  Â  Â  Â  element.querySelector('.luck-score').textContent = '---';
Â  Â  Â  Â  }

Â  Â  Â  Â  function clearDuelSlots() {
Â  Â  Â  Â  Â  Â  [p1DuelSlot, p2DuelSlot].forEach(slot => {
Â  Â  Â  Â  Â  Â  Â  Â  slot.classList.remove('winner', 'loser', 'loser-vanish', 'clash-flash');
Â  Â  Â  Â  Â  Â  Â  Â  slot.querySelector('.luck-score').textContent = '---';
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  eliminationMessage.style.display = 'none';
Â  Â  Â  Â  Â  Â  matchDetails.innerHTML = 'Awaiting next match command...';
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  function updateContenderList() {
Â  Â  Â  Â  Â  Â  const namesInput = document.getElementById('contenderNames').value.split('\n').map(n => n.trim()).filter(n => n);
Â  Â  Â  Â  Â  Â  if (allContenders.length === 0 && namesInput.length >= 2) {
Â  Â  Â  Â  Â  Â  Â  Â  setupTournament(true);Â 
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  tournamentListContainer.style.display = 'block';
Â  Â  Â  Â  Â  Â  contenderListUl.innerHTML = '';

Â  Â  Â  Â  Â  Â  allContenders.filter(c => c.active || !c.active).forEach(c => {Â 
Â  Â  Â  Â  Â  Â  Â  Â  const div = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  div.className = `contender-card-item ${c.active ? 'contender-active' : 'contender-eliminated'}`;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  div.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h5>${c.name}</h5>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${c.pokemon.spriteUrl}" alt="${c.pokemon.name}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="type-badge ${c.pokemon.type}">${c.pokemon.type}</div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  contenderListUl.appendChild(div);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  setupStatus.textContent = `Total Contenders: ${allContenders.filter(c => c.active).length} active. SHUFFLE or BEGIN.`;
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- TOURNAMENT FLOW ---
Â  Â  Â  Â Â 
Â  Â  Â  Â  function setupTournament(isInitialSetup = false) {
Â  Â  Â  Â  Â  Â  const namesInput = document.getElementById('contenderNames').value.split('\n').map(n => n.trim()).filter(n => n);
Â  Â  Â  Â  Â  Â  if (namesInput.length < 2) {
Â  Â  Â  Â  Â  Â  Â  Â  setupStatus.textContent = 'ERROR: Need at least two contender names.';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (isInitialSetup || allContenders.length !== namesInput.length) {
Â  Â  Â  Â  Â  Â  Â  Â  const shuffledPokemonData = shuffleArray([...POKEMON_SPRITE_DATA]);
Â  Â  Â  Â  Â  Â  Â  Â  allContenders = namesInput.map((name, index) => ({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: name,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pokemon: shuffledPokemonData[index % shuffledPokemonData.length],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  active: true
Â  Â  Â  Â  Â  Â  Â  Â  }));
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  activeContendersQueue = allContenders.filter(c => c.active);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  updateContenderList();
Â  Â  Â  Â  Â  Â  updateStatus('Contenders registered. Press BEGIN TOURNAMENT.');
Â  Â  Â  Â  }

Â  Â  Â  Â  function getRoundName(round) {
Â  Â  Â  Â  Â  Â  if (round === 0) return "THE GAUNTLET";
Â  Â  Â  Â  Â  Â  const active = allContenders.filter(c => c.active).length;
Â  Â  Â  Â  Â  Â  if (active <= 2) return "THE FINAL SHOWDOWN";
Â  Â  Â  Â  Â  Â  if (active <= 4) return "THE SEMI-FINALS";
Â  Â  Â  Â  Â  Â  if (active <= 8) return "THE QUARTER-FINALS";
Â  Â  Â  Â  Â  Â  return `ROUND ${round + 1}`;
Â  Â  Â  Â  }

Â  Â  Â  Â  function beginTournament() {
Â  Â  Â  Â  Â  Â  Â if (allContenders.filter(c => c.active).length < 2) {
Â  Â  Â  Â  Â  Â  Â  Â  setupStatus.textContent = 'ERROR: Need at least two active contenders to start the tournament.';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  gameMode = document.querySelector('input[name="gameMode"]:checked').value;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  tournamentRound = 0;
Â  Â  Â  Â  Â  Â  matchNumber = 0;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  activeContendersQueue = shuffleArray(allContenders.filter(c => c.active));

Â  Â  Â  Â  Â  Â  setupScreen.style.display = 'none';
Â  Â  Â  Â  Â  Â  gameScreen.style.display = 'flex';
Â  Â  Â  Â  Â  Â  document.getElementById('titleContainer').classList.add('game-active');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  statusConsole.innerHTML = setupStatus.innerHTML;

Â  Â  Â  Â  Â  Â  scheduleNextMatch();
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  function scheduleNextMatch() {
Â  Â  Â  Â  Â  Â  // Hide button while checking/setting up
Â  Â  Â  Â  Â  Â  nextMatchButton.style.display = 'none';Â 
Â  Â  Â  Â  Â  Â  nextMatchButton.disabled = true;
Â  Â  Â  Â  Â  Â  clearDuelSlots(); // Ensure clean slate before new pairing

Â  Â  Â  Â  Â  Â  // 1. Check for Tournament End
Â  Â  Â  Â  Â  Â  const activeCount = allContenders.filter(c => c.active).length;
Â  Â  Â  Â  Â  Â  if (activeCount === 1) {
Â  Â  Â  Â  Â  Â  Â  Â  endTournament(allContenders.find(c => c.active));
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  } else if (activeCount === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  endTournament(null);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // 2. Check if the current round queue is empty -> START NEW ROUND
Â  Â  Â  Â  Â  Â  if (activeContendersQueue.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  let winners = allContenders.filter(c => c.active);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  activeContendersQueue = shuffleArray(winners);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Handle odd number of players (bye)
Â  Â  Â  Â  Â  Â  Â  Â  if (activeContendersQueue.length % 2 !== 0 && activeContendersQueue.length > 1) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const byeContender = activeContendersQueue.pop();Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateStatus(`ROUND ANNOUNCEMENT: ${getRoundName(tournamentRound + 1)}! ${activeContendersQueue.length + 1} gladiators remain. **${byeContender.name} receives a BYE!**`);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â updateStatus(`ROUND ANNOUNCEMENT: ${getRoundName(tournamentRound + 1)}! ${activeContendersQueue.length} gladiators remain.`);
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  tournamentRound++;
Â  Â  Â  Â  Â  Â  Â  Â  matchNumber = 0;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  roundDisplay.textContent = getRoundName(tournamentRound);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Pause slightly longer for round announcement
Â  Â  Â  Â  Â  Â  Â  Â  if (gameMode === 'auto') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(scheduleNextMatch, MATCH_RESOLUTION_DELAY_MS);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.textContent = 'START NEXT ROUND';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.onclick = scheduleNextMatch;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // 3. Schedule the match
Â  Â  Â  Â  Â  Â  const p1 = activeContendersQueue.shift();
Â  Â  Â  Â  Â  Â  const p2 = activeContendersQueue.shift();

Â  Â  Â  Â  Â  Â  // FIX: If p2 is null, it means the player p1 had a bye in the previous round and queue is now empty.
Â  Â  Â  Â  Â  Â  if (!p2) {
Â  Â  Â  Â  Â  Â  Â  Â  // If there's only one player left in the queue, it means they got an implicit bye.
Â  Â  Â  Â  Â  Â  Â  Â  updateStatus(`${p1.name} receives a BYE and ADVANCES! Preparing new round pairings...`);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (gameMode === 'auto') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(scheduleNextMatch, MATCH_SETUP_DELAY_MS);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.textContent = 'CONTINUE TOURNAMENT';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.onclick = scheduleNextMatch;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  matchNumber++;
Â  Â  Â  Â  Â  Â  gameActive = true;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  currentMatch = { p1, p2, p1Pokemon: p1.pokemon, p2Pokemon: p2.pokemon };

Â  Â  Â  Â  Â  Â  // Update UI with match info
Â  Â  Â  Â  Â  Â  roundDisplay.textContent = `${getRoundName(tournamentRound)} | MATCH ${matchNumber}`;
Â  Â  Â  Â  Â  Â  p1DuelSlot.querySelector('h4').textContent = currentMatch.p1.name;
Â  Â  Â  Â  Â  Â  p2DuelSlot.querySelector('h4').textContent = currentMatch.p2.name;

Â  Â  Â  Â  Â  Â  updateDuelSlot(p1DuelSlot, currentMatch.p1);
Â  Â  Â  Â  Â  Â  updateDuelSlot(p2DuelSlot, currentMatch.p2);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  p1DuelSlot.classList.add('clash-flash');
Â  Â  Â  Â  Â  Â  p2DuelSlot.classList.add('clash-flash');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  updateStatus(`DUEL INITIATED! ${currentMatch.p1.name} (${currentMatch.p1Pokemon.type}) vs ${currentMatch.p2.name} (${currentMatch.p2Pokemon.type}). Fate is sealed...`);

Â  Â  Â  Â  Â  Â  // Time to view the pairing before resolution starts
Â  Â  Â  Â  Â  Â  if (gameMode === 'auto') {
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(resolveDuelScores, MATCH_SETUP_DELAY_MS);Â 
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.textContent = 'RESOLVE DUEL';
Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.onclick = resolveDuelScores;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  // --- MULTI-STAGE RESOLUTION ---

Â  Â  Â  Â  function resolveDuelScores() {
Â  Â  Â  Â  Â  Â  // Stage 1: Calculate and display scores
Â  Â  Â  Â  Â  Â  nextMatchButton.disabled = true; // Always disable button during auto-stages

Â  Â  Â  Â  Â  Â  const p1Roll = Math.floor(Math.random() * 100) + 1;
Â  Â  Â  Â  Â  Â  const p2Roll = Math.floor(Math.random() * 100) + 1;

Â  Â  Â  Â  Â  Â  const p1TypeAdj = getTypeAdjustment(currentMatch.p1Pokemon.type, currentMatch.p2Pokemon.type);
Â  Â  Â  Â  Â  Â  const p2TypeAdj = getTypeAdjustment(currentMatch.p2Pokemon.type, currentMatch.p1Pokemon.type);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const p1PowerBonus = Math.round(currentMatch.p1Pokemon.power * 0.2);
Â  Â  Â  Â  Â  Â  const p2PowerBonus = Math.round(currentMatch.p2Pokemon.power * 0.2);

Â  Â  Â  Â  Â  Â  const p1BattleScore = p1Roll + p1TypeAdj + p1PowerBonus;
Â  Â  Â  Â  Â  Â  const p2BattleScore = p2Roll + p2TypeAdj + p2PowerBonus;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Determine winner locally for scoring display
Â  Â  Â  Â  Â  Â  let winnerContender, loserContender;
Â  Â  Â  Â  Â  Â  if (p1BattleScore > p2BattleScore) {
Â  Â  Â  Â  Â  Â  Â  Â  winnerContender = currentMatch.p1;
Â  Â  Â  Â  Â  Â  Â  Â  loserContender = currentMatch.p2;
Â  Â  Â  Â  Â  Â  } else if (p2BattleScore > p1BattleScore) {
Â  Â  Â  Â  Â  Â  Â  Â  winnerContender = currentMatch.p2;
Â  Â  Â  Â  Â  Â  Â  Â  loserContender = currentMatch.p1;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // Tiebreaker logic (using power then random) remains the same
Â  Â  Â  Â  Â  Â  Â  Â  const finalDecider = currentMatch.p1Pokemon.power !== currentMatch.p2Pokemon.power ?Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (currentMatch.p1Pokemon.power > currentMatch.p2Pokemon.power ? currentMatch.p1 : currentMatch.p2) :
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (Math.random() > 0.5 ? currentMatch.p1 : currentMatch.p2);
Â  Â  Â  Â  Â  Â  Â  Â  winnerContender = finalDecider;
Â  Â  Â  Â  Â  Â  Â  Â  loserContender = finalDecider === currentMatch.p1 ? currentMatch.p2 : currentMatch.p1;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  currentMatch.p1Score = p1BattleScore;
Â  Â  Â  Â  Â  Â  currentMatch.p2Score = p2BattleScore;
Â  Â  Â  Â  Â  Â  currentMatch.winner = winnerContender;
Â  Â  Â  Â  Â  Â  currentMatch.loser = loserContender;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Prepare informative message
Â  Â  Â  Â  Â  Â  const getAdjText = (adj) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (adj > 0) return `<span class="type-adj-text">Super Effective (+50)</span>`;
Â  Â  Â  Â  Â  Â  Â  Â  if (adj < 0) return `<span class="type-disadj-text">Not Effective (-30)</span>`;
Â  Â  Â  Â  Â  Â  Â  Â  return `Neutral (0)`;
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const detailMsg = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="score-line score-p1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>${currentMatch.p1.name} (${currentMatch.p1Pokemon.type})</strong><br>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  LUCK ROLL: +${p1Roll} | TYPE: ${getAdjText(p1TypeAdj)} | PWR: +${p1PowerBonus}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="score-line score-p2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>${currentMatch.p2.name} (${currentMatch.p2Pokemon.type})</strong><br>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  LUCK ROLL: +${p2Roll} | TYPE: ${getAdjText(p2TypeAdj)} | PWR: +${p2PowerBonus}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  matchDetails.innerHTML = detailMsg;

Â  Â  Â  Â  Â  Â  updateStatus("SCORES CALCULATED! Standby for the final strike...");

Â  Â  Â  Â  Â  Â  if (gameMode === 'auto') {
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(resolveDuelClash, MATCH_SCORE_DISPLAY_MS);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.textContent = 'FINAL STRIKE';
Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.onclick = resolveDuelClash;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  function resolveDuelClash() {
Â  Â  Â  Â  Â  Â  // Stage 2: Final Clash Animation and Elimination Setup
Â  Â  Â  Â  Â  Â  nextMatchButton.disabled = true;

Â  Â  Â  Â  Â  Â  const { p1Score, p2Score, winner, loser } = currentMatch;

Â  Â  Â  Â  Â  Â  // Apply final scores and winner/loser styles
Â  Â  Â  Â  Â  Â  p1LuckScoreDisplay.textContent = Math.round(p1Score);
Â  Â  Â  Â  Â  Â  p2LuckScoreDisplay.textContent = Math.round(p2Score);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  p1DuelSlot.classList.remove('clash-flash');
Â  Â  Â  Â  Â  Â  p2DuelSlot.classList.remove('clash-flash');

Â  Â  Â  Â  Â  Â  if (winner === currentMatch.p1) {
Â  Â  Â  Â  Â  Â  Â  Â  p1DuelSlot.classList.add('winner');
Â  Â  Â  Â  Â  Â  Â  Â  p2DuelSlot.classList.add('loser');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  p2DuelSlot.classList.add('winner');
Â  Â  Â  Â  Â  Â  Â  Â  p1DuelSlot.classList.add('loser');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  playExplosion();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Show dramatic result message
Â  Â  Â  Â  Â  Â  eliminationMessage.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: var(--neon-red); text-shadow: 0 0 10px var(--neon-red); font-weight: bold;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${loser.name} ELIMINATED!
Â  Â  Â  Â  Â  Â  Â  Â  </span>Â 
Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: var(--neon-green); text-shadow: 0 0 10px var(--neon-green);">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${winner.name} ADVANCES!
Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  eliminationMessage.style.display = 'block';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  updateStatus("ELIMINATION CONFIRMED! The arena claims its victim...");

Â  Â  Â  Â  Â  Â  if (gameMode === 'auto') {
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(resolveDuelFinish, MATCH_ELIMINATION_MS);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.textContent = 'CONTINUE';
Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.onclick = resolveDuelFinish;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function resolveDuelFinish() {
Â  Â  Â  Â  Â  Â  // Stage 3: Final state transition and queue next match
Â  Â  Â  Â  Â  Â  nextMatchButton.disabled = true;

Â  Â  Â  Â  Â  Â  const { loser } = currentMatch;

Â  Â  Â  Â  Â  Â  // Apply visual vanishing effect
Â  Â  Â  Â  Â  Â  const loserSlot = loser === currentMatch.p1 ? p1DuelSlot : p2DuelSlot;
Â  Â  Â  Â  Â  Â  loserSlot.classList.add('loser-vanish');

Â  Â  Â  Â  Â  Â  // Eliminate the loser from the global list
Â  Â  Â  Â  Â  Â  const eliminatedIndex = allContenders.findIndex(c => c.name === loser.name);
Â  Â  Â  Â  Â  Â  if (eliminatedIndex !== -1) {
Â  Â  Â  Â  Â  Â  Â  Â  allContenders[eliminatedIndex].active = false;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  updateContenderList();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // --- Determine Next Action ---
Â  Â  Â  Â  Â  Â  const remainingContenders = allContenders.filter(c => c.active);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (remainingContenders.length === 1) {
Â  Â  Â  Â  Â  Â  Â  Â  // FINAL WINNER FOUND
Â  Â  Â  Â  Â  Â  Â  Â  if (gameMode === 'auto') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => endTournament(remainingContenders[0]), MATCH_SETUP_DELAY_MS);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.textContent = 'CROWN CHAMPION';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.onclick = () => endTournament(remainingContenders[0]);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // CONTINUE TOURNAMENT
Â  Â  Â  Â  Â  Â  Â  Â  if (gameMode === 'auto') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(scheduleNextMatch, MATCH_SETUP_DELAY_MS);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.textContent = 'NEXT BATTLE';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextMatchButton.onclick = scheduleNextMatch;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function endTournament(winner) {
Â  Â  Â  Â  Â  Â  gameActive = false;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.getElementById('winnerName').textContent = winner ? winner.name : "DRAW";
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  gameScreen.style.display = 'none';
Â  Â  Â  Â  Â  Â  winnerOverlay.style.display = 'flex';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  updateStatus(`TOURNAMENT COMPLETE! ${winner ? winner.name : 'No one'} is the CHAMPION.`);
Â  Â  Â  Â  }

Â  Â  Â  Â  function resetGame() {
Â  Â  Â  Â  Â  Â  gameActive = false;
Â  Â  Â  Â  Â  Â  tournamentRound = 0;
Â  Â  Â  Â  Â  Â  matchNumber = 0;
Â  Â  Â  Â  Â  Â  setupScreen.style.display = 'block';
Â  Â  Â  Â  Â  Â  gameScreen.style.display = 'none';
Â  Â  Â  Â  Â  Â  winnerOverlay.style.display = 'none';
Â  Â  Â  Â  Â  Â  document.getElementById('titleContainer').classList.remove('game-active');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  allContenders = [];
Â  Â  Â  Â  Â  Â  activeContendersQueue = [];
Â  Â  Â  Â  Â  Â  currentMatch = null;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.getElementById('contenderNames').value = '';Â 
Â  Â  Â  Â  Â  Â  selectPlayersButton.style.display = 'block';
Â  Â  Â  Â  Â  Â  shufflePokemonsButton.style.display = 'block';
Â  Â  Â  Â  Â  Â  tournamentListContainer.style.display = 'none';
Â  Â  Â  Â  Â  Â  nextMatchButton.style.display = 'none';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  initializePokemonData();
Â  Â  Â  Â  Â  Â  updateStatus('Enter contenders and press SHUFFLE POKÃ‰MONS.');
Â  Â  Â  Â  Â  Â  clearDuelSlots();
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- EVENT LISTENERS ---
Â  Â  Â  Â  selectPlayersButton.addEventListener('click', beginTournament);
Â  Â  Â  Â  shufflePokemonsButton.addEventListener('click', shufflePokemons);
Â  Â  Â  Â  document.getElementById('contenderNames').addEventListener('input', () => setupTournament(true));
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Initial setup
Â  Â  Â  Â  initializePokemonData();
Â  Â  Â  Â  resetGame();

Â  Â  </script>
</body>
</html>
